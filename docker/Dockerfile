FROM node:16.17.0-buster-slim
ENV DIR=/usr/src/ejp-gui
ARG BACKEND_URL
ENV BACKEND_URL=${BACKEND_URL}
ARG SSO_AUTH_URL
ENV SSO_AUTH_URL=${SSO_AUTH_URL}
ARG SSO_USER_INFO_URL
ENV SSO_USER_INFO_URL=${SSO_USER_INFO_URL}
ARG SSO_TOKEN_URL
ENV SSO_TOKEN_URL=${SSO_TOKEN_URL}
ARG SSO_CLIENT_ID
ENV SSO_CLIENT_ID=${SSO_CLIENT_ID}
RUN mkdir -p $DIR
WORKDIR $DIR
COPY . $DIR
RUN apt update
RUN yarn install
RUN yarn build
EXPOSE 3000
ENV NUXT_HOST=0.0.0.0
ENV NUXT_PORT=3000
CMD [ "yarn", "start" ]
