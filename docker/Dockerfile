FROM node:16.17.0-buster-slim
ENV DIR=/usr/src/ejp-gui
ARG KEYCLOAK_REALM
ENV KEYCLOAK_REALM=${KEYCLOAK_REALM}
ARG KEYCLOAK_CLIENT_ID
ENV KEYCLOAK_CLIENT_ID=${KEYCLOAK_CLIENT_ID}
ARG KEYCLOAK_URL
ENV KEYCLOAK_URL=${KEYCLOAK_URL}
ARG BACKEND_URL_1
ENV BACKEND_URL_1=${BACKEND_URL_1}
ARG BACKEND_URL_2
ENV BACKEND_URL_2=${BACKEND_URL_2}
RUN mkdir -p $DIR
WORKDIR $DIR
COPY . $DIR
RUN apt update
RUN yarn install
RUN yarn build
EXPOSE 3000
ENV NUXT_HOST=0.0.0.0
ENV NUXT_PORT=3000
CMD [ "yarn", "start" ]
